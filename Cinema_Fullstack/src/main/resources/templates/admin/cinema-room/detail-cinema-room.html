<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Cinema - Admin</title>-->
<!--    <base href="/">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1">-->
<!--    <link rel="icon" type="image/x-icon" href="favicon.ico">-->
<!--    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"-->
<!--          rel="stylesheet">-->
<!--    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">-->
<!--    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"-->
<!--          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">-->
<!--    <link rel="stylesheet" href="/template/layout/admin.css">-->
<!--    <style>-->
<!--        .seat {-->
<!--            width: 40px;-->
<!--            height: 40px;-->
<!--            margin: 5px;-->
<!--            border-radius: 5px;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            justify-content: center;-->
<!--        }-->

<!--        .seat-none {-->
<!--            background-color: transparent;-->
<!--        }-->

<!--        .standard-seat {-->
<!--            background-color: #28a745;-->
<!--            color: white;-->
<!--        }-->

<!--        .vip-seat {-->
<!--            background-color: #ff9800;-->
<!--            color: white;-->
<!--        }-->

<!--        .damaged-seat {-->
<!--            background-color: #dc3545;-->
<!--            color: white;-->
<!--        }-->

<!--        .screen {-->
<!--            background-color: #6c757d;-->
<!--            color: white;-->
<!--            padding: 10px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body class="mat-typography">-->
<!--<div class="wrapper">-->
<!--    &lt;!&ndash; Navbar &ndash;&gt;-->
<!--    <div th:replace="~{admin/admin-shared/admin-navbar.html}"></div>-->

<!--    &lt;!&ndash; Main Content Layout &ndash;&gt;-->
<!--    <div class="main-content">-->
<!--        &lt;!&ndash; Sidebar &ndash;&gt;-->
<!--        <div th:replace="~{admin/admin-shared/admin-sidebar.html}"></div>-->

<!--        <div class="content-wrapper">-->
<!--            <div class="content-header">-->
<!--                <div class="container-fluid">-->
<!--                    <div class="row mb-2">-->
<!--                        <div class="col-sm-6">-->
<!--                            <h1 class="m-0" th:text="'Phòng chiếu ' + ${cinemaRoom.name}"></h1>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->

<!--            <section class="content">-->
<!--                <div class="container-fluid ">-->
<!--                    <div class="col-md-12 mx-auto">-->
<!--                        <div class="col-md-8 screen">-->
<!--                            <div class="col-md-8 text-center mr-auto ml-auto">Màn hình</div>-->
<!--                        </div>-->
<!--                        <div class="col-md-12 mr-auto ml-auto">-->
<!--                            <table class="table table-borderless seat-layout mr-auto ml-auto">-->
<!--                                <tbody class="text-center justify-content-center align-content-center">-->
<!--                                <tr th:each="row : ${rows}">-->
<!--                                    <td th:each="column : ${columns}">-->
<!--                                        <div class="seat"-->
<!--                                             th:classappend="${cinemaRoom.seatLayout[row * cinemaRoom.columnSeat + column] == 'n' ? 'seat-none' : ''}"-->
<!--                                             th:classappend="${cinemaRoom.seatLayout[row * cinemaRoom.columnSeat + column] == 's' ? 'standard-seat' : ''}"-->
<!--                                             th:classappend="${cinemaRoom.seatLayout[row * cinemaRoom.columnSeat + column] == 'v' ? 'vip-seat' : ''}"-->
<!--                                             th:classappend="${cinemaRoom.seatLayout[row * cinemaRoom.columnSeat + column] == 'd' ? 'damaged-seat' : ''}"-->
<!--                                             th:text="${#execInfo.getMethod('getSeatName', row, column, cinemaRoom.seatLayout, cinemaRoom.columnSeat)}">-->
<!--                                        </div>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                            </table>-->
<!--                        </div>-->
<!--                        <div class="col-md-8 seat-layout d-flex flex-row justify-content-center ml-auto mr-auto mt-2 mb-4">-->
<!--                            <div class="seat standard-seat text-center"></div>-->
<!--                            <label class="ml-2 mr-2 mt-2">Ghế thường</label>-->
<!--                            <div class="seat vip-seat text-center"></div>-->
<!--                            <label class="ml-2 mr-2 mt-2">Ghế VIP</label>-->
<!--                            <div class="seat damaged-seat text-center"></div>-->
<!--                            <label class="ml-2 mr-2 mt-2">Ghế hỏng</label>-->
<!--                        </div>-->
<!--                        <div>-->
<!--                            <div class="col-md-8 seat-layout d-flex flex-row justify-content-center ml-auto mr-auto mt-2">-->
<!--                                <a th:href="@{/admin/cinema-room}" class="btn btn-primary ml-auto mr-auto mb-4">-->
<!--                                    Quay lại-->
<!--                                </a>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </section>-->
<!--        </div>-->

<!--    </div>-->

<!--    <div th:replace="~{admin/admin-shared/admin-footer.html}"></div>-->

<!--    &lt;!&ndash; Control Sidebar &ndash;&gt;-->
<!--    <aside class="control-sidebar control-sidebar-dark">-->
<!--        &lt;!&ndash; Control sidebar content goes here &ndash;&gt;-->
<!--    </aside>-->
<!--</div>-->


<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"-->
<!--        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"-->
<!--        crossorigin="anonymous"></script>-->
<!--<script src="/template/bootstrap/jquery-3.6.0.min.js"></script>-->
<!--<script src="/template/bootstrap/js/bootstrap.js"></script>-->
<!--<script src="/template/sidebar.js"></script>-->

<!--<th:block th:fragment="seatNameScript">-->
<!--    <script th:inline="javascript">-->
<!--        /*<![CDATA[*/-->
<!--        function getSeatName(row, column, seatLayout, columnSeat) {-->
<!--            let r = 0;-->
<!--            let spaceRow = 0;-->

<!--            // Count seats in current row up to column-->
<!--            for (let i = 0; i <= column; i++) {-->
<!--                if (seatLayout[row * columnSeat + i] !== 'n') {-->
<!--                    r++;-->
<!--                }-->
<!--            }-->

<!--            // Count empty rows-->
<!--            for (let j = 0; j <= row; j++) {-->
<!--                let countSpace = 0;-->
<!--                for (let k = 0; k < columnSeat; k++) {-->
<!--                    if (seatLayout[j * columnSeat + k] === 'n') {-->
<!--                        countSpace++;-->
<!--                    }-->
<!--                }-->
<!--                if (countSpace === columnSeat) {-->
<!--                    spaceRow++;-->
<!--                }-->
<!--            }-->

<!--            // Generate seat name-->
<!--            if (seatLayout[row * columnSeat + column] !== 'n') {-->
<!--                return String.fromCharCode(65 + row - spaceRow) + r;-->
<!--            }-->
<!--            return '';-->
<!--        }-->
<!--        /*]]>*/-->
<!--    </script>-->
<!--</th:block>-->
<!--</body>-->
<!--</html>-->


<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Cinema - Admin</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="/template/layout/admin.css">
    <link rel="stylesheet" href="/template/layout/detail-cinema-room.css">
</head>
<body class="mat-typography">
<div class="wrapper">
    <!-- Navbar -->
    <div th:replace="~{admin/admin-shared/admin-navbar.html}"></div>

    <!-- Main Content Layout -->
    <div class="main-content">
        <!-- Sidebar -->
        <div th:replace="~{admin/admin-shared/admin-sidebar.html}"></div>

        <div class="content-wrapper">
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0" th:text="'Phòng chiếu ' + ${cinemaRoom.name}"></h1>
                        </div>
                    </div>
                </div>
            </div>

            <section class="content">
                <div class="container-fluid">
                    <div class="col-md-12 mx-auto">
                        <div class="col-md-8 screen screen-container">
                            <div class="screen-shimmer"></div>
                            <div class="screen-gradient"></div>
                            <div class="screen-holo-lines"></div>
                            <div class="screen-particles"></div>
                            <div class="col-md-8 text-center mr-auto ml-auto screen-text">Màn hình</div>
                            <div class="screen-reflection"></div>
                        </div>
                        <div class="col-md-12 mr-auto ml-auto">
                            <table class="table table-borderless seat-layout mr-auto ml-auto">
                                <tbody class="text-center justify-content-center align-content-center">
                                <tr th:each="row : ${rows}">
                                    <td th:each="column : ${columns}">
                                        <div class="seat"
                                             th:data-row="${row}"
                                             th:data-column="${column}"
                                             th:classappend="${
                                             cinemaRoom.seatLayout[row * cinemaRoom.columnSeat + column] == 'n' ? 'seat-none' :
                                             (cinemaRoom.seatLayout[row * cinemaRoom.columnSeat + column] == 's' ? 'standard-seat' :
                                             (cinemaRoom.seatLayout[row * cinemaRoom.columnSeat + column] == 'v' ? 'vip-seat' :
                                             (cinemaRoom.seatLayout[row * cinemaRoom.columnSeat + column] == 'd' ? 'damaged-seat' : '')))}">
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-md-8 seat-layout d-flex flex-row justify-content-center ml-auto mr-auto mt-2 mb-4">
                            <div class="seat standard-seat text-center"></div>
                            <label class="ml-2 mr-2 mt-2">Ghế thường</label>
                            <div class="seat vip-seat text-center"></div>
                            <label class="ml-2 mr-2 mt-2">Ghế VIP</label>
                            <div class="seat damaged-seat text-center"></div>
                            <label class="ml-2 mr-2 mt-2">Ghế hỏng</label>
                        </div>
                        <div>
                            <div class="col-md-8 seat-layout d-flex flex-row justify-content-center ml-auto mr-auto mt-2">
                                <a th:href="@{/admin/cinema-room}" class="btn btn-primary ml-auto mr-auto mb-4">
                                    Quay lại
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <div th:replace="~{admin/admin-shared/admin-footer.html}"></div>

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
    </aside>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<script src="/template/bootstrap/jquery-3.6.0.min.js"></script>
<script src="/template/bootstrap/js/bootstrap.js"></script>
<script src="/template/sidebar.js"></script>

<script th:inline="javascript">
    /*<![CDATA[*/
    $(document).ready(function() {
        const seatLayout = /*[[${cinemaRoom.seatLayout}]]*/ '';
        const columnSeat = /*[[${cinemaRoom.columnSeat}]]*/ 0;

        $('.seat').each(function() {
            const row = parseInt($(this).data('row'));
            const column = parseInt($(this).data('column'));
            const seatName = getSeatName(row, column, seatLayout, columnSeat);
            $(this).text(seatName);
        });

        function getSeatName(row, column, seatLayout, columnSeat) {
            let r = 0;
            let spaceRow = 0;

            // Count seats in current row up to column
            for (let i = 0; i <= column; i++) {
                if (seatLayout[row * columnSeat + i] !== 'n') {
                    r++;
                }
            }

            // Count empty rows
            for (let j = 0; j <= row; j++) {
                let countSpace = 0;
                for (let k = 0; k < columnSeat; k++) {
                    if (seatLayout[j * columnSeat + k] === 'n') {
                        countSpace++;
                    }
                }
                if (countSpace === columnSeat) {
                    spaceRow++;
                }
            }

            // Generate seat name
            if (seatLayout[row * columnSeat + column] !== 'n') {
                return String.fromCharCode(65 + row - spaceRow) + r;
            }
            return '';
        }
    });
    /*]]>*/
</script>
</body>
</html>